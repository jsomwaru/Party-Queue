---
- hosts: all
  tasks:
    - name: Copy Systemd Service
      ansible.builtin.template:
        src: ../service/partyq.service
        dest: /etc/systemd/system/partyq.service
        mode: '644'
        owner: root
        group: root
      become: yes

    - name: Stop PartyQ if currently running
      ansible.builtin.systemd_service:
        daemon_reload: true
        name: partyq
        state: stopped
      become: yes
      ignore_errors: yes

    - name: Start PartyQ
      ansible.builtin.systemd_service:
        daemon_reload: true
        state: started 
        name: partyq
      become: yes
