name: "Deploy PartyQ"
on:
  workflow_dispatch:
jobs:
  deploy:
    runs-on: "self-hosted"
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Check active
        run: |
          VENV=~/partyq
          pwd
          if [ ! -d  $VENV ]
          then
            python -m venv ~/partyq/
          fi
          source ~/partyq/bin/activate
          pip install -r requirements.txt
          
          source ~/partyq/bin/activate && ./start.sh &
          echo $! > pid
